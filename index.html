<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSINT Analyzer - Live Tracking</title>
    <style>
        :root { --neon-green: #00ff41; --dark-bg: #0d1117; --card-bg: #161b22; }
        body { font-family: 'Courier New', Courier, monospace; background-color: var(--dark-bg); color: white; margin: 0; padding: 20px; }
        .dashboard { max-width: 1000px; margin: auto; display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        .card { background: var(--card-bg); border: 1px solid #30363d; padding: 15px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        h1, h2 { color: var(--neon-green); text-transform: uppercase; letter-spacing: 2px; }
        .data-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #21262d; font-size: 0.9em; }
        .label { color: #8b949e; }
        .value { color: var(--neon-green); font-weight: bold; text-align: right; }
        #live-feed { height: 350px; overflow-y: auto; background: black; padding: 10px; font-size: 0.8em; color: #58a6ff; border: 1px solid #30363d; }
        .alert { color: #ff7b72; font-weight: bold; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }
        .highlight { background: rgba(0, 255, 65, 0.1); padding: 2px 5px; border-radius: 3px; }
    </style>
</head>
<body>

<header style="text-align: center; margin-bottom: 30px;">
    <h1>Digital Analytics Platform</h1>
    <p>Interactive demonstration of your digital footprint</p>
</header>

<div class="dashboard">
    <div class="main-panel">
        <div class="card" style="margin-bottom: 20px;">
            <h2>üïµÔ∏è Network Identity</h2>
            <div class="data-row"><span class="label">Public IP Address:</span> <span id="ip" class="value">Searching...</span></div>
            <div class="data-row"><span class="label">Estimated Location:</span> <span id="geo" class="value">Analyzing...</span></div>
            <div class="data-row"><span class="label">Carrier / ISP:</span> <span id="isp" class="value" style="color: #ffca28;">Analyzing...</span></div>
            <div class="data-row" style="background: rgba(255,0,0,0.1);">
                <span class="label alert">WebRTC Leak (Real/VPN IP):</span> 
                <span id="webrtc" class="value">Testing...</span>
            </div>
        </div>

        <div class="card">
            <h2>üíª Hardware & Advanced Analytics</h2>
            <div class="data-row"><span class="label">Operating System:</span> <span id="os" class="value"></span></div>
            <div class="data-row"><span class="label">Detected Browser:</span> <span id="browser" class="value"></span></div>
            <div class="data-row"><span class="label">GPU (Graphics Card):</span> <span id="gpu" class="value">Analyzing...</span></div>
            <div class="data-row"><span class="label">CPU Cores:</span> <span id="cpu" class="value"></span></div>
            <div class="data-row"><span class="label">RAM (Estimate):</span> <span id="ram" class="value"></span></div>
            <div class="data-row"><span class="label">Battery Status:</span> <span id="battery" class="value">N/A</span></div>
            <div class="data-row"><span class="label">Connection Type:</span> <span id="connection" class="value">Analyzing...</span></div>
            <div class="data-row"><span class="label">System Theme:</span> <span id="theme" class="value">Analyzing...</span></div>
            <div class="data-row"><span class="label">Languages:</span> <span id="languages" class="value">Analyzing...</span></div>
            <div class="data-row"><span class="label">Canvas Fingerprint:</span> <span id="canvas-hash" class="value">Generating...</span></div>
            <div class="data-row" style="font-size: 0.7em; color: #58a6ff;">
                <span class="label">Raw User-Agent:</span> 
                <span id="raw-agent" style="word-break: break-all; text-align: right;"></span>
            </div>
        </div>
    </div>

    <div class="side-panel">
        <div class="card" style="margin-bottom: 20px; border-color: var(--neon-green);">
            <h2>üëÄ Persistence</h2>
            <p id="visit-msg" style="font-size: 0.9em; line-height: 1.4;"></p>
        </div>

        <div class="card">
            <h2>üõ∞Ô∏è Satellite Activity Feed</h2>
            <div id="live-feed"></div>
        </div>
    </div>
</div>

<canvas id="canvas-fp" width="200" height="40" style="display:none;"></canvas>

<script>
    const feed = document.getElementById('live-feed');
    function log(msg) {
        const time = new Date().toLocaleTimeString();
        feed.innerHTML = `<div>[${time}] ${msg}</div>` + feed.innerHTML;
    }

    // --- 1. PERSISTENCE (Tracking) ---
    let visits = localStorage.getItem('osint_v');
    if (!visits) {
        visits = 1;
        document.getElementById('visit-msg').innerHTML = "First-time visitor detected. <span class='highlight'>Unique ID generated</span>.";
    } else {
        visits = parseInt(visits) + 1;
        document.getElementById('visit-msg').innerHTML = `Returning user identified. Visit count: <span class='highlight'>${visits}</span>.`;
        log("Returning user identified via local storage.");
    }
    localStorage.setItem('osint_v', visits);

    // --- 2. HARDWARE & BROWSER DETECTION ---
    document.getElementById('os').innerText = navigator.platform;
    document.getElementById('raw-agent').innerText = navigator.userAgent;

    // Improved Browser Detection Logic
    const agent = navigator.userAgent;
    let bName = "Unknown";
    if (agent.indexOf("OPR") > -1 || agent.indexOf("Opera") > -1) bName = "Opera";
    else if (agent.indexOf("Edg") > -1) bName = "Microsoft Edge";
    else if (agent.indexOf("Chrome") > -1) bName = "Google Chrome";
    else if (agent.indexOf("Safari") > -1) bName = "Apple Safari";
    else if (agent.indexOf("Firefox") > -1) bName = "Mozilla Firefox";
    document.getElementById('browser').innerText = bName;

    document.getElementById('cpu').innerText = navigator.hardwareConcurrency + " Cores";
    document.getElementById('ram').innerText = (navigator.deviceMemory || "N/A") + " GB";
    document.getElementById('languages').innerText = navigator.languages.join(', ');

    // GPU Detection
    const getGPU = () => {
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl');
        if (gl) {
            const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
            return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "N/A";
        }
        return "Disabled";
    };
    document.getElementById('gpu').innerText = getGPU();

    // Theme Preference
    document.getElementById('theme').innerText = window.matchMedia('(prefers-color-scheme: dark)').matches ? "Dark Mode" : "Light Mode";

    // Connection Info
    const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
    if (conn) document.getElementById('connection').innerText = `${conn.effectiveType} (~${conn.downlink} Mbps)`;

    // --- 3. NETWORK & CARRIER (API) ---
    fetch('https://ipapi.co/json/')
        .then(res => res.json())
        .then(data => {
            document.getElementById('ip').innerText = data.ip;
            document.getElementById('geo').innerText = `${data.city}, ${data.country_name}`;
            document.getElementById('isp').innerText = data.org || "Unknown Carrier";
            log(`Network Identity: ${data.ip} (${data.org})`);
        })
        .catch(() => log("Network API blocked by browser extension."));

    // --- 4. BATTERY ---
    if (navigator.getBattery) {
        navigator.getBattery().then(bat => {
            const updateBat = () => {
                document.getElementById('battery').innerText = `${Math.round(bat.level * 100)}% (${bat.charging ? 'Charging' : 'Discharging'})`;
            };
            updateBat();
            bat.addEventListener('levelchange', updateBat);
        });
    }

    // --- 5. CANVAS FINGERPRINTING ---
    const canvas = document.getElementById('canvas-fp');
    const ctx = canvas.getContext('2d');
    ctx.fillText("OSINT-ANALYSER-PRO", 10, 10);
    const canvasData = canvas.toDataURL();
    let hash = 0;
    for (let i = 0; i < canvasData.length; i++) {
        hash = ((hash << 5) - hash) + canvasData.charCodeAt(i);
        hash |= 0;
    }
    document.getElementById('canvas-hash').innerText = Math.abs(hash);

    // --- 6. WEBRTC LEAK ---
    function getLocalIPs(callback) {
        const RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;
        if (!RTCPeerConnection) return;
        const pc = new RTCPeerConnection({ iceServers: [{ urls: "stun:stun.l.google.com:19302" }] });
        pc.createDataChannel("");
        pc.onicecandidate = (e) => {
            if (!e.candidate) return;
            const res = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(e.candidate.candidate);
            if (res) callback(res[1]);
        };
        pc.createOffer().then(sdp => pc.setLocalDescription(sdp));
    }
    getLocalIPs(ip => {
        if(!document.getElementById('webrtc').innerText.includes(ip)) {
            document.getElementById('webrtc').innerText = ip;
            log(`<span class='alert'>LEAK! Internal IP Address Found: ${ip}</span>`);
        }
    });

    // --- 7. LIVE EVENTS ---
    window.addEventListener('blur', () => log("<span style='color:#ff7b72'>Page defocused (Tab switch)</span>"));
    window.addEventListener('focus', () => log("Page back in focus. Monitoring resumed."));
    window.addEventListener('click', () => log("User Interaction: Click detected."));

</script>
</body>
</html>
